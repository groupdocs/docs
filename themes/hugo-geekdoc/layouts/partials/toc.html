{{- $tocLevels := default (default 6 .Site.Params.GeekdocToC) .Page.Params.GeekdocToC }}

{{- if and $tocLevels .Page.TableOfContents -}}
    <div class="gdoc-toc gdoc-toc__level--{{ $tocLevels }}">
      {{ .Page.TableOfContents | replaceRE `<nav id="TableOfContents">\s*<ul>\s*<li>\s*<ul>` `<nav id="TableOfContents"><ul>` | replaceRE `</ul>\s*</li>\s*</ul>\s*</nav>` `</ul></nav>` | safeHTML }}
      <hr />
    </div>
{{- end -}}
